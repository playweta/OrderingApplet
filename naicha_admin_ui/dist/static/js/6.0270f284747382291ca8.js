webpackJsonp([6],{VJ8i:function(e,t,r){"use strict";t.c=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a="/orderInfoAdmin/page?pageNo=";a=(a+=e||"")+"&pageSize="+(t||""),r&&(a+="&orderStatus="+r);return Object(n.a)({url:a,method:"get"})},t.e=function(e,t){return Object(n.a)({url:"/orderInfoAdmin/nextStatus/"+e+"/"+t,method:"post"})},t.d=function(e){return Object(n.a)({url:"/orderInfoAdmin/wxPayStatus/"+e})},t.b=function(e){return Object(n.a)({url:"/orderInfoAdmin/cancelOrderNotPay/"+e,method:"put"})},t.a=function(e,t){return Object(n.a)({url:"/orderInfoAdmin/cancelAndRefund/"+e+"?reason="+t,method:"put"})};var n=r("dca+")},pqWi:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("VJ8i"),a={name:"orderInfoAdminComponent",data:function(){return{searchParams:{searchParam1:null,pageNo:1,pageSize:10},total:0,orderInfoAdmins:[],currentOrderStatus:"制作中",showCancelReasonModal:!1,selectedOrder:null,cancelReason:""}},mounted:function(){this.getOrderInfoAdmins(this.currentOrderStatus)},methods:{getOrderInfoAdmins:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;t.currentOrderStatus=e,Object(n.c)(t.searchParams.pageNo,t.searchParams.pageSize,e).then(function(e){t.orderInfoAdmins=e.data.records,t.total=e.data.total})},changePageNo:function(e){this.searchParams.pageNo=e,this.getOrderInfoAdmins()},changePageSize:function(e){this.searchParams.pageSize=e,this.getOrderInfoAdmins()},toNextOrderStatus:function(e){var t=this,r=this;"未付款"===e.orderStatus?this.$confirm("用户并未付款, 请确保已经线下付款或其他方式支付","是否继续?",{}).then(function(){t.$confirm("订单目前的状态为: "+e.orderStatus,"请再次确认是否继续",{}).then(function(){Object(n.e)(e.orderNo,e.orderStatus).then(function(n){t.$notify.success("订单状态已标记为: "+n.data),r.getOrderInfoAdmins(e.orderStatus)})}).catch(function(){})}).catch(function(){}):this.$confirm("订单目前的状态为: "+e.orderStatus,"是否进入下一步",{}).then(function(){Object(n.e)(e.orderNo,e.orderStatus).then(function(n){t.$notify.success("订单状态已标记为: "+n.data),r.getOrderInfoAdmins(e.orderStatus)})}).catch(function(){})},queryWeixinOrder:function(e){var t=this,r=this;Object(n.d)(e).then(function(e){t.$notify.success("微信订单的支付状态为: "+e.data),r.getOrderInfoAdmins("未付款")})},cancelOrderNotPay:function(e){var t=this,r=this;this.$confirm("","取消订单(请确保该订单未支付)，是否取消？",{}).then(function(){Object(n.b)(e).then(function(e){t.$notify.success(e.data),r.getOrderInfoAdmins("未付款")})}).catch(function(){})},refundOrder:function(e){var t=this;this.selectedOrder=e,this.$confirm("","是否退款取消该订单",{}).then(function(){t.showCancelReasonModal=!0}).catch(function(){})},handelCancelOrder:function(){var e=this,t=this;t.showCancelReasonModal=!1,Object(n.a)(t.selectedOrder.orderNo,t.cancelReason).then(function(r){e.$notify.success(r.data),t.getOrderInfoAdmins("制作中")})}}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticStyle:{"text-align":"left",margin:"5px 10px"}},[r("el-button",{attrs:{size:"mini",type:"未付款"===e.currentOrderStatus?"info":"",round:""},on:{click:function(t){return e.getOrderInfoAdmins("未付款")}}},[e._v("\n      未付款\n    ")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"制作中"===e.currentOrderStatus?"warning":"",round:""},on:{click:function(t){return e.getOrderInfoAdmins("制作中")}}},[e._v("\n      制作中\n    ")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"配送中"===e.currentOrderStatus?"primary":"",round:""},on:{click:function(t){return e.getOrderInfoAdmins("配送中")}}},[e._v("\n      配送中\n    ")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"请取餐"===e.currentOrderStatus?"success":"",round:""},on:{click:function(t){return e.getOrderInfoAdmins("请取餐")}}},[e._v("\n      请取餐\n    ")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"已送达"===e.currentOrderStatus?"success":"",round:""},on:{click:function(t){return e.getOrderInfoAdmins("已送达")}}},[e._v("\n      已送达\n    ")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"退款中"===e.currentOrderStatus?"danger":"",round:""},on:{click:function(t){return e.getOrderInfoAdmins("退款中")}}},[e._v("\n      退款中\n    ")])],1),e._v(" "),r("el-dialog",{attrs:{title:"退款取消订单",visible:e.showCancelReasonModal},on:{"update:visible":function(t){e.showCancelReasonModal=t}}},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.cancelReason,expression:"cancelReason"}],attrs:{cols:"50",rows:"10",maxlength:"30",placeholder:"输入取消订单的原因..."},domProps:{value:e.cancelReason},on:{input:function(t){t.target.composing||(e.cancelReason=t.target.value)}}}),e._v(" "),r("br"),e._v(" "),r("el-button",{attrs:{type:"primary",round:""},on:{click:e.handelCancelOrder}},[e._v("确定取消")])],1),e._v(" "),r("div",{staticStyle:{margin:"0px 10px","text-align":"left"}},[r("el-table",{attrs:{data:e.orderInfoAdmins,stripe:"","default-sort":{prop:"createTime",order:"descending"}}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{attrs:{"label-position":"left",inline:""}},[r("el-form-item",{attrs:{label:"订单编号"}},[r("span",[e._v(e._s(t.row.orderNo))])]),e._v(" "),r("br"),e._v(" "),r("el-form-item",{attrs:{label:"取餐方式"}},[r("span",[e._v(e._s(t.row.takeType))])]),e._v(" "),r("br"),e._v(" "),r("el-form-item",{attrs:{label:"商品信息"}},[r("span",[e._v(e._s(t.row.goodsPreview))])]),e._v(" "),r("br"),e._v(" "),r("el-form-item",{attrs:{label:"总价格"}},[r("span",[e._v("￥"+e._s(t.row.totalPrice/100))])]),e._v(" "),r("br"),e._v(" "),r("el-form-item",{attrs:{label:"支付金额"}},[r("span",[e._v("￥"+e._s(t.row.payPrice/100))])]),e._v(" "),r("br"),e._v(" "),r("el-form-item",{attrs:{label:"下单时间"}},[r("span",[e._v(e._s(t.row.createTime))])]),e._v(" "),r("br"),e._v(" "),r("el-form-item",{attrs:{label:"支付时间"}},[r("span",[e._v(e._s(t.row.payTime))])]),e._v(" "),r("br"),e._v(" "),r("el-form-item",{attrs:{label:"微信订单号"}},[r("span",[e._v(e._s(t.row.wxPayTransactionId))])])],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"orderStatus",label:"订单状态"}}),e._v(" "),r("el-table-column",{attrs:{prop:"addressDetail",label:"收货地址",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{prop:"goodsPreview",label:"商品信息"}}),e._v(" "),r("el-table-column",{attrs:{prop:"goodsTotalNum",label:"商品总数",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{prop:"verifyNum",label:"取单号"}}),e._v(" "),r("el-table-column",{attrs:{prop:"createTime",label:"下单时间",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{prop:"payTime",label:"支付时间",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{prop:"userPhone",label:"用户电话","show-overflow-tooltip":""}}),e._v(" "),r("el-table-column",{attrs:{prop:"receiver",label:"取餐人",sortable:""}}),e._v(" "),r("el-table-column",{attrs:{prop:"extraInfo",label:"订单备注"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return["未付款"==t.row.orderStatus?r("span",[r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(r){return e.queryWeixinOrder(t.row.orderNo)}}},[e._v("查询支付状态\n            ")]),e._v(" "),r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(r){return e.cancelOrderNotPay(t.row.orderNo)}}},[e._v("取消\n            ")])],1):"退款中"!=t.row.orderStatus?r("span",[r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(r){return e.toNextOrderStatus(t.row)}}},[e._v("下一步")]),e._v(" "),"未付款"!=t.row.orderStatus&&"退款中"!=t.row.orderStatus?r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(r){return e.refundOrder(t.row)}}},[e._v("\n            退款\n          ")]):e._e()],1):e._e()]}}])})],1),e._v(" "),r("el-row",{staticStyle:{float:"right"}},[r("el-pagination",{attrs:{"current-page":e.searchParams.pageNo,"page-sizes":[5,10,20,30,50,100],"page-size":e.searchParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.changePageNo,"size-change":e.changePageSize,"update:currentPage":function(t){return e.$set(e.searchParams,"pageNo",t)},"update:current-page":function(t){return e.$set(e.searchParams,"pageNo",t)},"update:pageSize":function(t){return e.$set(e.searchParams,"pageSize",t)},"update:page-size":function(t){return e.$set(e.searchParams,"pageSize",t)}}})],1)],1)],1)},staticRenderFns:[]},s=r("VU/8")(a,o,!1,null,null,null);t.default=s.exports}});
//# sourceMappingURL=6.0270f284747382291ca8.js.map